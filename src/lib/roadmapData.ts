// Roadmap data structure - hardcoded content from ROADMAP.md
// Icons are lucide-react icon names

export interface RoadmapItem {
  id: string;
  title: string;
  description: string;
  type: 'research' | 'task' | 'subtask';
  priority?: 'critical' | 'high' | 'medium' | 'low';
}

export interface RoadmapBranch {
  id: string;
  title: string;
  icon: string; // lucide icon name
  description: string;
  priority: 'critical' | 'high' | 'medium' | 'low';
  color: string;
  items: RoadmapItem[];
}

export const roadmapBranches: RoadmapBranch[] = [
  {
    id: 'branch-1',
    title: 'Поиск среднего бизнеса',
    icon: 'Target',
    description: 'Найти работающие каналы привлечения среднего бизнеса',
    priority: 'critical',
    color: '#ef4444',
    items: [
      { 
        id: 'R1.1', 
        title: 'Ресерч HH.ru директора', 
        description: 'Парсинг вакансий "директор по развитию", "коммерческий директор" на HH.ru. Компании, которые ищут таких людей = растут и имеют бюджеты. Результат: список 100+ компаний с контактами.',
        type: 'research' 
      },
      { 
        id: 'R1.2', 
        title: 'Ресерч тендерных площадок', 
        description: 'Анализ участников крупных тендеров на zakupki.gov, B2B-Center. Компании с бюджетами на разработку. Результат: понимание доменов, список компаний.',
        type: 'research' 
      },
      { 
        id: 'R1.3', 
        title: 'Ресерч смежников (1С, CRM)', 
        description: 'Найти интеграторов 1С, CRM-внедренцев, кто не делает код/ML. Потенциальные партнёры для обмена лидами. Результат: список партнёров.',
        type: 'research' 
      },
      { 
        id: 'R1.4', 
        title: 'Ресерч полезного инструмента', 
        description: 'Какой бесплатный инструмент нужен среднему бизнесу? Калькулятор, аудит, чеклист. Идея магнита для лидов, который даём бесплатно и собираем контакты.',
        type: 'research' 
      },
      { 
        id: 'R1.5', 
        title: 'Ресерч конференций и ивентов', 
        description: 'Где физически собирается средний бизнес? Отраслевые конференции, бизнес-клубы. Результат: список 5-10 ивентов для присутствия.',
        type: 'research' 
      },
      { 
        id: 'R1.6', 
        title: 'Домены среднего бизнеса', 
        description: 'Какие домены среднего бизнеса чаще всего нуждаются в автоматизации? Финтех, логистика, производство?',
        type: 'research' 
      },
      { 
        id: 'R1.7', 
        title: 'Цикл продажи', 
        description: 'Какой цикл продажи у среднего бизнеса? Сколько касаний нужно? Кто ЛПР (лицо, принимающее решение)?',
        type: 'research' 
      },
      { 
        id: 'R1.8', 
        title: 'Боли среднего бизнеса', 
        description: 'Какие боли среднего бизнеса мы закрываем лучше всего? Что можем обещать?',
        type: 'research' 
      },
      { 
        id: 'R1.9', 
        title: 'Конкуренты в сегменте', 
        description: 'Кто конкуренты в сегменте среднего бизнеса? Как они продают и упаковывают услуги?',
        type: 'research' 
      },
      { 
        id: '1.2.1', 
        title: 'Критерии квалификации', 
        description: 'Сформировать критерии квалификации "средний бизнес": оборот, кол-во сотрудников, признаки роста, домен. Результат: чеклист квалификации лида.',
        type: 'task' 
      },
      { 
        id: '1.2.2', 
        title: 'ICP (Ideal Customer Profile)', 
        description: 'Составить описание идеального клиента с болями и триггерами покупки. Документ ICP с конкретными характеристиками.',
        type: 'task' 
      },
      { 
        id: '1.2.3', 
        title: 'Выбрать каналы поиска', 
        description: 'На основе ресерчей выбрать 2-3 приоритетных канала поиска клиентов. Приоритизированный список каналов с планом тестирования.',
        type: 'task' 
      },
      { 
        id: '1.2.4', 
        title: 'Тестовый outreach', 
        description: 'Запустить тестовый outreach на 50-100 контактов. Первичные касания, сбор обратной связи. Результат: конверсии, понимание возражений.',
        type: 'task' 
      },
      { 
        id: '1.2.5', 
        title: 'Анализ и итерация', 
        description: 'Проанализировать что сработало, что нет. Pivot при необходимости. Документировать выводы и следующие шаги.',
        type: 'task' 
      },
    ]
  },
  {
    id: 'branch-2',
    title: 'Упаковка услуг',
    icon: 'Package',
    description: 'Превратить экспертизу в понятные, повторяемые продукты',
    priority: 'critical',
    color: '#f97316',
    items: [
      { 
        id: 'R2.1', 
        title: 'Ресерч референс-проектов', 
        description: 'Какие прошлые проекты можно превратить в шаблоны? Результат: 1-3 референс-архитектуры для повторного использования.',
        type: 'research' 
      },
      { 
        id: 'R2.2', 
        title: 'Ресерч конкурентов', 
        description: 'Как упакованы услуги у конкурентов? Что работает на рынке? Бенчмарк по рынку.',
        type: 'research' 
      },
      { 
        id: 'R2.3', 
        title: 'Ресерч болей клиентов', 
        description: 'Какие слова/фразы используют клиенты для описания проблем? Voice of Customer для копирайтинга.',
        type: 'research' 
      },
      { 
        id: '2.2.1', 
        title: 'Референс-архитектура', 
        description: 'Превратить 1 успешный проект в референс-архитектуру: документация, код, процесс — готово к повторному использованию. Шаблон проекта.',
        type: 'task' 
      },
      { 
        id: '2.2.2', 
        title: '3 типовых пакета старта', 
        description: 'Описать 3 типовых пакета: MVP-спринт (быстрый запуск за 2-4 недели), Аудит текущих систем + план улучшений, Rescue-проект (спасение горящего проекта). С deliverables.',
        type: 'task' 
      },
      { 
        id: '2.2.3', 
        title: 'Каталог услуг с результатами', 
        description: 'Сформировать каталог 5-10 услуг с ясными результатами. Не "мы делаем React", а "вы получите работающий личный кабинет за X недель".',
        type: 'task' 
      },
      { 
        id: '2.2.4', 
        title: 'Калькулятор сроков/стоимости', 
        description: 'Создать внутренний инструмент для быстрой оценки. Можно как чат-бот или простая таблица. Не публичный.',
        type: 'task' 
      },
      { 
        id: '2.2.5', 
        title: 'Playbook пресейла', 
        description: 'Какие артефакты делаем за 48ч после звонка: бриф, оценка, презентация, примеры. Чеклист + шаблоны.',
        type: 'task' 
      },
      { 
        id: '2.2.6', 
        title: 'Квалификационные вопросы', 
        description: 'Набор вопросов-квалификаторов чтобы быстро отсеять токсичных лидов и быстро понять скоуп. Скрипт квалификации.',
        type: 'task' 
      },
      { 
        id: '2.2.7', 
        title: 'Воркшопы для лидогена', 
        description: 'Упаковать 1-2 воркшопа (платные/условно бесплатные) как точку входа для лидогенерации. Программа воркшопа, лендинг.',
        type: 'task' 
      },
      { 
        id: '2.3.1', 
        title: 'План первых 30 дней', 
        description: 'Шаблон "план первых 30 дней" для нового клиента. Снижает тревогу клиента, показывает профессионализм.',
        type: 'subtask', 
        priority: 'low' 
      },
      { 
        id: '2.3.2', 
        title: 'База знаний по доменам', 
        description: 'Внутренняя база знаний по доменам: финтех, медтех, логистика. Если есть фокус — документируем экспертизу.',
        type: 'subtask', 
        priority: 'low' 
      },
      { 
        id: '2.3.3', 
        title: 'Лицензирование наработок', 
        description: 'Определить какие наработки можно лицензировать/продавать повторно: плагины, модули, дизайн-система.',
        type: 'subtask', 
        priority: 'low' 
      },
    ]
  },
  {
    id: 'branch-3',
    title: 'Сайт студии',
    icon: 'Globe',
    description: 'Витрина позиционирования + инструмент работы с клиентами',
    priority: 'high',
    color: '#eab308',
    items: [
      { 
        id: '3.2.1', 
        title: 'Главная (лендинг)', 
        description: 'Навбар, Hero с позиционированием "честный AI", большие цифры (50% экономии), объяснение процесса с AI, портфолио (карточки как YouTube), график снижения расходов, о команде, текущие заказы (анонимно), CTA "Начать работу" с кастомным курсором, sticky кнопка.',
        type: 'task' 
      },
      { 
        id: '3.2.2', 
        title: 'Страница заказа (/order/[id])', 
        description: 'Трекер этапов как Instagram stories: описание требований → оценка → проработка → обсуждение → дизайн → разработка → тестирование. Кастомный контент на каждом этапе: форма ТЗ, ссылка на Miro, ссылка на Figma, тикеты. Кнопка связаться с менеджером.',
        type: 'task' 
      },
      { 
        id: '3.2.3', 
        title: 'Портфолио элемент (/portfolio/[id])', 
        description: 'Кастомная страница на каждый кейс: графики, таблицы, тексты. Красивое представление проекта.',
        type: 'task' 
      },
      { 
        id: '3.2.4', 
        title: 'Профиль (/profile)', 
        description: 'Заполнение данных клиента, привязка соцсетей для коммуникации.',
        type: 'task' 
      },
      { 
        id: '3.2.5', 
        title: 'Авторизация (/login, /register)', 
        description: 'Как у Google/OpenAI: красивые, проработанные, со всеми нужными шагами валидации.',
        type: 'task' 
      },
      { 
        id: '3.2.6', 
        title: 'Мои заказы (/orders)', 
        description: 'Список текущих заказов клиента с прогрессом и статусами.',
        type: 'task' 
      },
      { 
        id: '3.2.7', 
        title: 'Заявка в РКН', 
        description: 'Подать заявку в Роскомнадзор на сайт студии (обязательное требование).',
        type: 'task' 
      },
      { 
        id: '3.3.1', 
        title: 'Библиотека анимаций', 
        description: 'Выбрать и настроить библиотеку анимаций: Framer Motion или GSAP.',
        type: 'subtask' 
      },
      { 
        id: '3.3.2', 
        title: 'Библиотека графиков', 
        description: 'Выбрать библиотеку графиков: Recharts / Chart.js / D3.',
        type: 'subtask' 
      },
      { 
        id: '3.3.3', 
        title: 'Плавный скролл', 
        description: 'Настроить плавный скролл и scroll-triggered анимации.',
        type: 'subtask' 
      },
      { 
        id: '3.3.4', 
        title: 'Кастомный курсор', 
        description: 'Реализовать кастомный курсор для интерактивных зон.',
        type: 'subtask' 
      },
      { 
        id: '3.3.5', 
        title: 'Responsive', 
        description: 'Адаптивная вёрстка для всех экранов: mobile, tablet, desktop.',
        type: 'subtask' 
      },
    ]
  },
  {
    id: 'branch-4',
    title: 'Инженерные процессы',
    icon: 'Cog',
    description: 'Выстроить предсказуемый процесс разработки',
    priority: 'high',
    color: '#22c55e',
    items: [
      { 
        id: '4.1.1', 
        title: 'Единый рабочий процесс', 
        description: 'Сформировать единый рабочий процесс: бэклог → план → разработка → тест → релиз → пост-мортем. Документировать каждый этап.',
        type: 'task' 
      },
      { 
        id: '4.1.2', 
        title: 'Definition of Done', 
        description: 'Ввести Definition of Done в задачи. Что считается "сделано": код написан, тесты пройдены, ревью проведено, задокументировано.',
        type: 'task' 
      },
      { 
        id: '4.1.3', 
        title: 'Стандарты код-ревью', 
        description: 'Определить стандарты код-ревью: что проверяем, что запрещаем, SLA по ревью (ответ в течение X часов).',
        type: 'task' 
      },
      { 
        id: '4.1.4', 
        title: 'Инженерная планка', 
        description: 'Ввести "инженерную планку": что не выпускаем без тестов/ревью. Минимальные требования к качеству.',
        type: 'task' 
      },
      { 
        id: '4.2.1', 
        title: 'CI/CD базовый', 
        description: 'Настроить CI/CD хотя бы на базовом уровне: автотесты, линтинг, деплой по кнопке.',
        type: 'task' 
      },
      { 
        id: '4.2.2', 
        title: 'Шаблон репозитория', 
        description: 'Настроить шаблон или несколько шаблонов репозитория с готовой структурой, конфигами, CI/CD.',
        type: 'task' 
      },
      { 
        id: '4.2.3', 
        title: 'Политика ветвления', 
        description: 'Прописать политику ветвления и версионирования: git flow, trunk-based, semver.',
        type: 'task' 
      },
      { 
        id: '4.2.4', 
        title: 'Секретница', 
        description: 'Настроить нормальную секретницу: хранение секретов, ротация, доступы.',
        type: 'task' 
      },
      { 
        id: '4.2.5', 
        title: 'Наблюдаемость', 
        description: 'Поднять наблюдаемость (минимально): метрики + алерты + централизованные логи. Знать что происходит в продакшене.',
        type: 'task' 
      },
      { 
        id: '4.3.1', 
        title: 'Типовые архитектурные решения', 
        description: 'Составить список типовых архитектурных решений и "почему так". База знаний по архитектуре.',
        type: 'task' 
      },
      { 
        id: '4.3.2', 
        title: 'Библиотека компонентов', 
        description: 'Создать библиотеку переиспользуемых компонентов/шаблонов. UI-кит, общие модули.',
        type: 'task' 
      },
      { 
        id: '4.3.3', 
        title: 'Шаблон документации', 
        description: 'Создать шаблон технической документации: контекст, решения, ограничения, запуск проекта.',
        type: 'task' 
      },
      { 
        id: '4.3.4', 
        title: 'Журнал техдолга', 
        description: 'Организовать журнал техдолга: фиксируем, оцениваем, закрываем. Не копим молча.',
        type: 'task' 
      },
      { 
        id: '4.4.1', 
        title: 'Регулярные демо клиенту', 
        description: 'Ввести регулярные демо клиенту: показываем прогресс, собираем фидбек, снижаем риски.',
        type: 'task' 
      },
      { 
        id: '4.4.2', 
        title: 'Релиз-ноты', 
        description: 'Настроить релиз-ноты и прозрачную коммуникацию изменений. Клиент знает что изменилось.',
        type: 'task' 
      },
      { 
        id: '4.4.3', 
        title: 'Пост-мортемы', 
        description: 'Делать пост-мортемы по проблемам: причина → вывод → конкретный фикс процесса. Учимся на ошибках.',
        type: 'task' 
      },
      { 
        id: '4.4.4', 
        title: 'Инженерный ретрит', 
        description: 'Раз в квартал проводить "инженерный ретрит" на 2 часа: что улучшить в инструменте/процессе.',
        type: 'task' 
      },
      { 
        id: '4.5.1', 
        title: 'Нефункциональные требования', 
        description: 'Сделать набор типовых нефункциональных требований: безопасность, логирование, мониторинг. Чеклист для каждого проекта.',
        type: 'subtask' 
      },
      { 
        id: '4.5.2', 
        title: 'Оценка проектов диапазонами', 
        description: 'Научиться оценивать проекты диапазонами и рисками, а не точными вилками на глаз. Три точки: оптимистичная, реалистичная, пессимистичная.',
        type: 'subtask' 
      },
      { 
        id: '4.5.3', 
        title: 'WIP-лимиты', 
        description: 'Вести WIP-лимиты: меньше параллельщины — больше завершений. Ограничение работы в процессе.',
        type: 'subtask' 
      },
    ]
  },
  {
    id: 'branch-5',
    title: 'Команда и HR',
    icon: 'Users',
    description: 'Создать условия для роста команды',
    priority: 'medium',
    color: '#3b82f6',
    items: [
      { 
        id: '5.1.1', 
        title: 'Роли и ожидания', 
        description: 'Описать роли и ожидания: что значит "мидл", "сеньор" именно у нас. Карта компетенций.',
        type: 'task' 
      },
      { 
        id: '5.1.2', 
        title: 'Профиль идеального сотрудника', 
        description: 'Завести "профиль идеального сотрудника" для ключевых ролей. Не абстрактный, а конкретный.',
        type: 'task' 
      },
      { 
        id: '5.1.3', 
        title: 'Процесс найма', 
        description: 'Сделать процесс найма: скрининг → техинтервью → пробный таск → оффер. С критериями на каждом этапе.',
        type: 'task' 
      },
      { 
        id: '5.1.4', 
        title: 'Онбординг-план', 
        description: 'Подготовить онбординг-план на 7 дней и на 30 дней. Новый человек быстро входит в контекст.',
        type: 'task' 
      },
      { 
        id: '5.2.1', 
        title: 'Культурные принципы', 
        description: 'Создать "культурные принципы" (5-7), которые реально проверяются действиями. Не пустые слова.',
        type: 'task' 
      },
      { 
        id: '5.2.2', 
        title: 'Рутина 1:1', 
        description: 'Ввести рутину 1:1 раз в 2 недели и фиксировать проблемы до того как они взорвутся.',
        type: 'task' 
      },
      { 
        id: '5.2.3', 
        title: 'Система компенсаций', 
        description: 'Настроить прозрачную систему компенсаций и пересмотров. Хотя бы правила когда и как пересматриваем.',
        type: 'task' 
      },
      { 
        id: '5.2.4', 
        title: 'Требования к коммуникациям', 
        description: 'Прописать требования к коммуникациям: каналы, время ответа, как эскалировать проблемы.',
        type: 'task' 
      },
      { 
        id: '5.2.5', 
        title: 'Внутренние тех-токи', 
        description: 'Ввести обучение: внутренние тех-токи раз в месяц. Кто-то рассказывает, остальные задают вопросы.',
        type: 'task' 
      },
      { 
        id: '5.2.6', 
        title: 'Анти-выгорание режим', 
        description: 'Создать "анти-выгорание" режим: мониторинг нагрузки, правила отдыха, красные флаги.',
        type: 'task' 
      },
    ]
  },
  {
    id: 'branch-6',
    title: 'Операционка и финансы',
    icon: 'Wallet',
    description: 'Финансовая устойчивость и предсказуемость',
    priority: 'high',
    color: '#8b5cf6',
    items: [
      { 
        id: '6.1.1', 
        title: 'P&L-мышление', 
        description: 'Ввести P&L-мышление: доходы, прямые затраты, маржа, оверхед. Понимать экономику каждого проекта.',
        type: 'task' 
      },
      { 
        id: '6.1.2', 
        title: 'Учёт времени', 
        description: 'Вести стабильный учет времени или SP хотя бы для понимания себестоимости. Без микроменеджмента.',
        type: 'task' 
      },
      { 
        id: '6.1.3', 
        title: 'Прайс по ставкам', 
        description: 'Сформировать прайс по ставкам/пакетам и правила дисконтирования. Когда даём скидку, когда нет.',
        type: 'task' 
      },
      { 
        id: '6.1.4', 
        title: 'Инвойсинг и дебиторка', 
        description: 'Настроить инвойсинг и контроль дебиторки: кто когда должен, напоминания, эскалация.',
        type: 'task' 
      },
      { 
        id: '6.1.5', 
        title: 'Финансовая подушка', 
        description: 'Сделать финансовую подушку (цель: 2-3 месяца расходов) и план пополнения. Резерв на кризис.',
        type: 'task' 
      },
      { 
        id: '6.2.1', 
        title: 'План загрузки', 
        description: 'Ввести "план загрузки" по людям на 4-8 недель вперед. Видим кто свободен, кто перегружен.',
        type: 'task' 
      },
      { 
        id: '6.2.2', 
        title: 'Статус-репорт клиенту', 
        description: 'Стандартизировать коммуникации с клиентом: статус-репорт раз в неделю. Шаблон и процесс.',
        type: 'task' 
      },
      { 
        id: '6.2.3', 
        title: 'Политика инструментов', 
        description: 'Ввести политику инструментов: что оплачиваем, что нет, кто отвечает за лицензии.',
        type: 'task' 
      },
      { 
        id: '6.2.4', 
        title: 'Шаблоны документов', 
        description: 'Сделать библиотеку шаблонов документов: договор, NDA, SoW, акт, change request.',
        type: 'task' 
      },
      { 
        id: '6.2.5', 
        title: 'Реестр решений', 
        description: 'Завести "реестр решений": важные договоренности фиксируются письменно и легко находятся.',
        type: 'task' 
      },
    ]
  },
  {
    id: 'branch-7',
    title: 'Юридическое и риски',
    icon: 'Scale',
    description: 'Защита бизнеса и снижение рисков',
    priority: 'medium',
    color: '#ec4899',
    items: [
      { 
        id: '7.1.1', 
        title: 'Юрструктура и документы', 
        description: 'Привести в порядок юридическую структуру и базовые документы: договора об оказании услуг, NDA, IP.',
        type: 'task' 
      },
      { 
        id: '7.1.2', 
        title: 'Политика IP', 
        description: 'Определить политику IP: кому принадлежит код, как лицензируются библиотеки, что open-source.',
        type: 'task' 
      },
      { 
        id: '7.1.3', 
        title: 'Безопасность', 
        description: 'Настроить безопасность: MFA, менеджер паролей, доступы по ролям, offboarding при уходе людей.',
        type: 'task' 
      },
      { 
        id: '7.1.4', 
        title: 'SLA и поддержка', 
        description: 'Прописать SLA/поддержку: что считается инцидентом и как быстро реагируем. Уровни критичности.',
        type: 'task' 
      },
      { 
        id: '7.1.5', 
        title: 'Чеклист рисков перед релизом', 
        description: 'Сделать "чеклист перед релизом" по рискам: бэкапы, откат, мониторинг, доступы. Не забываем ничего.',
        type: 'task' 
      },
    ]
  },
  {
    id: 'branch-8',
    title: 'Партнёрства',
    icon: 'Handshake',
    description: 'Дополнительные каналы лидов и усиление команды',
    priority: 'medium',
    color: '#06b6d4',
    items: [
      { 
        id: '8.1.1', 
        title: 'Агентства-смежники', 
        description: 'Найти 3-5 агентств/студий "смежников" (дизайн/маркетинг/аналитика) и обменяться лидами.',
        type: 'task' 
      },
      { 
        id: '8.1.2', 
        title: 'Партнерский оффер', 
        description: 'Сформировать "партнерский оффер": проценты/фикс за лид/совместные пакеты. Мотивация партнёров.',
        type: 'task' 
      },
      { 
        id: '8.1.3', 
        title: 'Продуктовые консультанты', 
        description: 'Выйти на 2-3 продуктовых консультантов/фрилансеров как "усиление по требованию". Пул специалистов.',
        type: 'task' 
      },
      { 
        id: '8.1.4', 
        title: 'Комьюнити и ивенты', 
        description: 'Выбрать 1 комьюнити/ивент и появляться там регулярно, а не набегами. Строим присутствие.',
        type: 'task' 
      },
      { 
        id: '8.1.5', 
        title: 'Календарь консультаций', 
        description: 'Сделать публичный "открытый календарь слотов" для консультаций/дискавери. Упрощает вход для клиентов.',
        type: 'task' 
      },
    ]
  },
];

// Get total count of items
export function getTotalItemsCount(): number {
  return roadmapBranches.reduce((acc, branch) => acc + branch.items.length, 0);
}

// Get all item IDs for the backend
export function getAllItemIds(): string[] {
  return roadmapBranches.flatMap(branch => branch.items.map(item => item.id));
}

// Find item by ID
export function findItemById(id: string): { item: RoadmapItem; branch: RoadmapBranch } | null {
  for (const branch of roadmapBranches) {
    const item = branch.items.find(i => i.id === id);
    if (item) {
      return { item, branch };
    }
  }
  return null;
}
